<script src="https://d3js.org/d3.v5.min.js"></script>
<svg id="area"></svg>

<svg id="desk" style="position: absolute; transform: rotate(270deg)">
  <rect
    x="250"
    y="7"
    width="70"
    height="70"
    style="
      stroke: black;
      fill: transparent;
      stroke-width: 2;
      stroke-dasharray: 5, 5;
    "
  />
  <rect
    x="270"
    y="28"
    width="25"
    height="25"
    style="stroke: black; fill: white; stroke-width: 2"
  />
  <rect
    x="290"
    y="7"
    width="30"
    height="70"
    style="stroke: black; fill: white; stroke-width: 2"
  />
</svg>

<style>
  .area {
    fill: white;
    stroke: black;
    stroke-width: 3px;
  }
  .desk {
    fill: #f4f5fc;
    stroke: black;
    stroke-width: 2;
  }
  .desk-area {
    fill: none;
    stroke: black;
    stroke-width: 1;
    stroke-dasharray: 5, 5;
  }
  .grid line {
    fill: none;
    stroke: rgba(0, 0, 0, 0.2);
    stroke-width: 1;
  }
</style>
<body>
  <div id="grid"></div>
</body>
<script>
  var data = [
    {
      x: 0,
      y: 0,
    },
    //vindu
    {
      x: 19,
      y: 0,
    },
    {
      x: 19,
      y: -1,
    },
    {
      x: 14,
      y: -1,
    },
    {
      x: 14,
      y: 0,
    },
    //vindu
    {
      x: 13,
      y: 0,
    },
    {
      x: 13,
      y: -1,
    },
    {
      x: 8,
      y: -1,
    },
    {
      x: 8,
      y: 0,
    },
    //vindu
    {
      x: 7,
      y: 0,
    },
    {
      x: 7,
      y: -1,
    },
    {
      x: 2,
      y: -1,
    },
    {
      x: 2,
      y: 0,
    },

    {
      x: 22,
      y: 0,
    },
    {
      x: 22,
      y: 40,
    },
    {
      x: 22,
      y: 40,
    },
    {
      x: 22,
      y: 45,
    },
    {
      x: 10,
      y: 45,
    },
    {
      x: 10,
      y: 33,
    },
    {
      x: 8,
      y: 33,
    },
    {
      x: 8,
      y: 40,
    },
    //d√∏r
    {
      x: 0,
      y: 40,
    },
    {
      x: 0,
      y: 20,
    },
    {
      x: 0.5,
      y: 20,
    },
    {
      x: 0.5,
      y: 10,
    },
    {
      x: 0,
      y: 10,
    },
    {
      x: 0,
      y: 20,
    },
  ];

  var windowElement = [
    {
      x: 19,
      y: 10,
    },
    {
      x: 19,
      y: -4,
    },
    {
      x: 14,
      y: -4,
    },
    {
      x: 14,
      y: 10,
    },
    {
      x: 19,
      y: 10,
    },
  ];

  var margin = { top: 20, right: 20, bottom: 30, left: 30 },
    width = 400 - margin.left - margin.right,
    height = 350 - margin.top - margin.bottom;

  var x = d3
    .scaleLinear()
    .domain([
      0,
      d3.max(data, function (d) {
        return d.x;
      }),
    ])
    .range([0, width]);

  var y = d3
    .scaleLinear()
    .domain([
      0,
      d3.max(data, function (d) {
        return d.y;
      }),
    ])
    .range([height, 0]);

  var xAxis = d3.axisBottom().scale(x);

  var yAxis = d3.axisLeft().scale(y);

  var area = d3
    .area()
    .x(function (d) {
      return x(d.x);
    })
    .y0(height)
    .y1(function (d) {
      return y(d.y);
    });

  var svg = d3
    .select("svg#area")
    .attr("width", width + margin.left + margin.right)
    .attr("height", height + margin.top + margin.bottom)
    .append("g")
    .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

  // Room outline
  svg.append("path").datum(data).attr("class", "area").attr("d", area);

  svg
    .append("clipPath")
    .attr("id", "area-clip")
    .append("path")
    .attr("d", area(data));

  // Grid
  var grid = svg.append("g").attr("clip-path", "url(#area-clip)");

  grid
    .append("g")
    .attr("class", "grid")
    .attr("transform", "translate(0," + height + ")")
    .call(xAxis.tickSize(-height).tickFormat(""));
  grid
    .append("g")
    .attr("class", "grid")
    .call(yAxis.tickSize(-width).tickFormat(""));

  // Desk
  function placeDesk(xPos = 0, yPos = 95, rotation = 0) {
    var desk = svg.append("g");

    // Dimensions
    var deskAreaHeight = 70,
      deskAreaWidth = 70,
      tableWidth = deskAreaWidth,
      tableHeight = deskAreaHeight / 2,
      chairWidth = 25,
      chairHeight = chairWidth;

    // Desk area
    var deskArea = desk
      .append("rect")
      .attr("x", 0)
      .attr("y", 0)
      .attr("width", deskAreaWidth)
      .attr("height", deskAreaHeight)
      .attr("class", "desk-area");

    // Chair
    var chair = desk
      .append("rect")
      .attr("x", 20)
      .attr("y", 15)
      .attr("width", chairWidth)
      .attr("height", chairHeight)
      .attr("class", "desk");

    // Table
    var table = desk
      .append("rect")
      .attr("x", 0)
      .attr("y", 40)
      .attr("width", tableWidth)
      .attr("height", tableHeight)
      .attr("class", "desk");

    // Group attributes
    desk.attr(
      "transform",
      "translate(" +
        xPos +
        ", " +
        yPos +
        ") rotate(" +
        rotation +
        ", " +
        deskAreaWidth / 2 +
        "," +
        deskAreaHeight / 2 +
        ")"
    );
  }

  placeDesk(0, 0, 0);
</script>
